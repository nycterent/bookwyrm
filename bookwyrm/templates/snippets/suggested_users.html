{% load i18n %}
{% load utilities %}
{% load humanize %}
<div class="columns is-mobile scroll-x mb-0">
    {% for user in suggested_users %}
    <div class="column is-flex is-flex-grow-0 suggest_{{ user.id }}">
        <div class="box has-text-centered is-shadowless has-background-tertiary m-0" style="position: relative;">
            <form action="{% url 'dismiss-suggestion' %}" method="POST" class="interaction" data-id="suggest_{{ user.id }}" style="position: absolute; top: 0.5rem; right: 0.5rem;">
                {% csrf_token %}
                <input type="hidden" name="user" value="{{ user.username }}">
                <button class="delete" type="submit" title="{% trans 'Not interested' %}" aria-label="{% trans 'Not interested' %}"></button>
            </form>
            <a href="{{ user.local_path }}" class="has-text-default">
                {% include 'snippets/avatar.html' with user=user large=True %}
                <span title="{{ user.display_name }}" class="is-block is-6 has-text-weight-bold">{{ user.display_name|truncatechars:10 }}</span>
                <span title="@{{ user|username }}" class="is-block pb-3">@{{ user|username|truncatechars:8 }}</span>
            </a>
            {% include 'snippets/follow_button.html' with user=user minimal=True %}
            {% if user.mutuals and not user.hide_follows %}
            <p class="help">
                {% blocktrans trimmed with mutuals=user.mutuals|intcomma count counter=user.mutuals %}
                {{ mutuals }} follower you follow
                {% plural %}
                {{ mutuals }} followers you follow{% endblocktrans %}
            </p>
            {% elif user.shared_books %}
            <p class="help">
                {% blocktrans trimmed with shared_books=user.shared_books|intcomma count counter=user.shared_books %}
                {{ shared_books }} book on your shelves
                {% plural %}
                {{ shared_books }} books on your shelves
                {% endblocktrans %}
            </p>
            {% elif request.user in user.following.all %}
            <p class="help">
                {% trans "Follows you" %}
            </p>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>

